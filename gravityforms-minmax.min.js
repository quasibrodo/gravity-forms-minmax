gform.addFilter("gform_calculation_result",function(result,formulaField,formId,calcObj){console.log(fieldFormula);if(formulaField.formula.indexOf("MIN")>-1||formulaField.formula.indexOf("MAX")>-1){var fieldFormula=calcObj.replaceFieldTags(formId,formulaField.formula,formulaField);var pattern=/(MIN|MAX)\(([\d\.]+)\s*,\s*([\d\.]+)\)/gi;var matches=fieldFormula.match(pattern);var replaces=[];for(let i in matches){var components=/(MIN|MAX)\(([\d\.]+)\s*,\s*([\d\.]+)\)/gi.exec(matches[i]);if(components[1]=="MIN")replaces.push([matches[i],,Math.min(components[2],components[3])]);if(components[1]=="MAX")replaces.push([matches[i],,Math.max(components[2],components[3])])}for(let i in replaces){fieldFormula=fieldFormula.replace(replaces[i][0],replaces[i][2])}console.log(fieldFormula);fieldFormula=fieldFormula.replace(/[^0-9\s\n\r\+\-\*\/\^\(\)\.](MIN|MAX)/g,"");result=eval(fieldFormula)}return result});
