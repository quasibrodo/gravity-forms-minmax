gform.addFilter("gform_calculation_result",function(result,formulaField,formId,calcObj){if(formulaField.formula.indexOf("MIN")>-1||formulaField.formula.indexOf("MAX")>-1){let fieldFormula=calcObj.replaceFieldTags(formId,formulaField.formula,formulaField);const pattern=/(MIN|MAX)\(([\d\s\W]+)\s*\)/gi,matches=fieldFormula.match(pattern);let replaces=[];for(let i in matches){let components=/(MIN|MAX)\(([\d\s\W]+)\s*\)/gi.exec(matches[i]),values=components[2].split(",").map((value,index,array)=>parseFloat(eval(value.trim())));"MIN"==components[1]&&replaces.push([matches[i],,Math.min(...values)]),"MAX"==components[1]&&replaces.push([matches[i],,Math.max(...values)])}for(let e in replaces)fieldFormula=fieldFormula.replace(replaces[e][0],replaces[e][2]);fieldFormula=fieldFormula.replace(/[^0-9\s\n\r\+\-\*\/\^\(\)\.](MIN|MAX)/g,""),result=eval(fieldFormula)}return result});
